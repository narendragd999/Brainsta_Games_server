<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
<title>Balance Logic Pro</title>
<style>
/* Reset & Base */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  -webkit-tap-highlight-color: transparent;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  touch-action: manipulation;
}

html, body {
  width: 100%;
  height: 100%;
  overflow: hidden;
  font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
  background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
  color: #fff;
}

/* Main Layout */
.game-container {
  width: 100vw;
  height: 100vh;
  max-width: 500px;
  margin: 0 auto;
  display: flex;
  flex-direction: column;
  padding: 16px;
  position: relative;
}

/* Header */
.game-header {
  text-align: center;
  padding: 0px 0;
  margin-bottom: 8px;
}

.game-title {
  font-size: 24px;
  font-weight: 700;
  background: linear-gradient(90deg, #6ee7b7, #3b82f6);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  letter-spacing: -0.5px;
  margin-bottom: 4px;
}

.game-subtitle {
  font-size: 13px;
  color: #94a3b8;
  font-weight: 400;
}

/* Stats Bar */
.stats-bar {
  display: flex;
  justify-content: space-between;
  background: rgba(30, 41, 59, 0.8);
  backdrop-filter: blur(10px);
  border-radius: 16px;
  padding: 0px 20px;
  margin-bottom: 16px;
  border: 1px solid rgba(255, 255, 255, 0.05);
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.2);
}

.stat-item {
  text-align: center;
}

.stat-value {
  font-size: 20px;
  font-weight: 700;
  color: #60a5fa;
  display: block;
  line-height: 1.2;
}

.stat-label {
  font-size: 11px;
  color: #94a3b8;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

/* Progress */
.level-progress {
  margin-bottom: 20px;
}

.progress-label {
  display: flex;
  justify-content: space-between;
  margin-bottom: 8px;
  font-size: 13px;
  color: #cbd5e1;
}

.progress-bar {
  height: 6px;
  background: rgba(30, 41, 59, 0.6);
  border-radius: 3px;
  overflow: hidden;
}

.progress-fill {
  height: 100%;
  background: linear-gradient(90deg, #3b82f6, #8b5cf6);
  border-radius: 3px;
  width: 10%;
  transition: width 0.3s ease;
}

/* Game Area */
.game-area {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 20px;
}

/* Scale Container */
.scale-container {
  background: rgba(30, 41, 59, 0.5);
  border-radius: 20px;
  padding: 20px;
  border: 1px solid rgba(255, 255, 255, 0.05);
  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
}

.scale-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 20px;
  position: relative;
}

.scale-row:last-child {
  margin-bottom: 0;
}

.scale-pan {
  flex: 1;
  min-height: 80px;
  background: linear-gradient(145deg, #1e293b, #0f172a);
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
  padding: 12px;
  border: 2px solid rgba(255, 255, 255, 0.05);
  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);
}

.scale-equals {
  width: 40px;
  text-align: center;
  font-size: 28px;
  font-weight: 700;
  color: #6ee7b7;
  text-shadow: 0 0 10px rgba(110, 231, 183, 0.3);
}

/* Shapes */
.shape {
  width: 48px;
  height: 48px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 14px;
  color: white;
  text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
  border-radius: 12px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
}

.circle {
  background: linear-gradient(135deg, #ef4444, #dc2626);
  border-radius: 50%;
}

.square {
  background: linear-gradient(135deg, #3b82f6, #2563eb);
  border-radius: 8px;
}

.triangle {
  background: linear-gradient(135deg, #f59e0b, #d97706);
  clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
}

.diamond {
  background: linear-gradient(135deg, #8b5cf6, #7c3aed);
  transform: rotate(45deg);
  border-radius: 4px;
}

.diamond::before {
  content: '';
  display: block;
  width: 32px;
  height: 32px;
  background: linear-gradient(135deg, #8b5cf6, #7c3aed);
  border-radius: 4px;
  transform: rotate(45deg);
}

/* Question Box */
.question-box {
  background: rgba(30, 41, 59, 0.8);
  border-radius: 16px;
  padding: 20px;
  text-align: center;
  border: 1px solid rgba(255, 255, 255, 0.05);
  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
}

.question-text {
  font-size: 18px;
  font-weight: 600;
  color: #f8fafc;
  margin-bottom: 4px;
}

.question-subtext {
  font-size: 13px;
  color: #94a3b8;
}

/* Answer Options */
.answer-options {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr;
  gap: 12px;
  margin-bottom: 16px;
}

.option-btn {
  background: linear-gradient(135deg, #1e293b, #0f172a);
  border: 2px solid rgba(255, 255, 255, 0.05);
  border-radius: 14px;
  padding: 16px 8px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 8px;
  cursor: pointer;
  transition: all 0.2s ease;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
}

.option-btn:active {
  transform: translateY(2px);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

.option-btn.selected {
  border-color: #3b82f6;
  background: linear-gradient(135deg, rgba(59, 130, 246, 0.2), rgba(30, 41, 59, 0.8));
}

.option-shape {
  width: 32px;
  height: 32px;
}

.option-label {
  font-size: 12px;
  font-weight: 600;
  color: #cbd5e1;
}

/* Control Buttons */
.control-buttons {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr;
  gap: 12px;
}

.control-btn {
  padding: 14px;
  border: none;
  border-radius: 12px;
  font-weight: 600;
  font-size: 14px;
  cursor: pointer;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
}

.control-btn:active {
  transform: translateY(2px);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

.btn-hint {
  background: linear-gradient(135deg, #8b5cf6, #7c3aed);
  color: white;
}

.btn-next {
  background: linear-gradient(135deg, #10b981, #059669);
  color: white;
}

.btn-reset {
  background: linear-gradient(135deg, #f59e0b, #d97706);
  color: white;
}

/* Popup */
.popup-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.85);
  backdrop-filter: blur(8px);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  padding: 20px;
}

.popup-content {
  background: linear-gradient(135deg, #1e293b, #0f172a);
  border-radius: 24px;
  padding: 30px;
  max-width: 400px;
  width: 100%;
  border: 1px solid rgba(255, 255, 255, 0.1);
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
  animation: popupIn 0.3s cubic-bezier(0.16, 1, 0.3, 1);
}

@keyframes popupIn {
  from {
    opacity: 0;
    transform: scale(0.9);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

.popup-icon {
  font-size: 48px;
  text-align: center;
  margin-bottom: 16px;
}

.popup-title {
  font-size: 24px;
  font-weight: 700;
  text-align: center;
  margin-bottom: 12px;
  color: #f8fafc;
}

.popup-message {
  font-size: 15px;
  line-height: 1.5;
  color: #cbd5e1;
  text-align: center;
  margin-bottom: 24px;
}

.popup-btn {
  width: 100%;
  padding: 16px;
  background: linear-gradient(135deg, #3b82f6, #2563eb);
  border: none;
  border-radius: 12px;
  color: white;
  font-weight: 600;
  font-size: 16px;
  cursor: pointer;
  transition: all 0.2s ease;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
}

.popup-btn:active {
  transform: translateY(2px);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

/* Level Dots */
.level-dots {
  display: flex;
  justify-content: center;
  gap: 6px;
  margin-top: 12px;
}

.level-dot {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
}

.level-dot.active {
  width: 20px;
  border-radius: 10px;
  background: linear-gradient(90deg, #3b82f6, #8b5cf6);
}

/* Timer */
.timer {
  position: absolute;
  top: 16px;
  right: 16px;
  background: rgba(239, 68, 68, 0.15);
  padding: 8px 16px;
  border-radius: 20px;
  font-size: 14px;
  font-weight: 600;
  color: #fca5a5;
  border: 1px solid rgba(239, 68, 68, 0.3);
}

/* Mobile Optimization */
@media (max-height: 700px) {
  .game-container {
    padding: 12px;
  }
  
  .scale-pan {
    min-height: 70px;
  }
  
  .shape {
    width: 42px;
    height: 42px;
  }
  
  .option-btn {
    padding: 12px 6px;
  }
  
  .control-btn {
    padding: 12px;
  }
}
</style>
</head>
<body>
<div class="game-container">
  <!-- Timer -->
  <div class="timer" id="timer">01:30</div>
  
  <!-- Header -->
  <div class="game-header">
    <h1 class="game-title">Balance Logic Pro</h1>
    <p class="game-subtitle">Deduce weights from balanced scales</p>
  </div>
  
  <!-- Stats -->
  <div class="stats-bar">
    <div class="stat-item">
      <span class="stat-value" id="score">270</span>
      <span class="stat-label">Score</span>
    </div>
    <div class="stat-item">
      <span class="stat-value" id="level">1</span>
      <span class="stat-label">Level</span>
    </div>
    <div class="stat-item">
      <span class="stat-value" id="streak">5</span>
      <span class="stat-label">Streak</span>
    </div>
  </div>
  
  <!-- Progress -->
  <div class="level-progress">
    <div class="progress-label">
      <span>Progress</span>
      <span id="progress-text">1/10</span>
    </div>
    <div class="progress-bar">
      <div class="progress-fill" id="progress-fill"></div>
    </div>
    <div class="level-dots" id="level-dots"></div>
  </div>
  
  <!-- Game Area -->
  <div class="game-area">
    <!-- Scale 1 -->
    <div class="scale-container">
      <div class="scale-row">
        <div class="scale-pan" id="scale1-left">
          <div class="shape circle"></div>
        </div>
        <div class="scale-equals">=</div>
        <div class="scale-pan" id="scale1-right">
          <div class="shape square"></div>
        </div>
      </div>
      
      <!-- Scale 2 -->
      <div class="scale-row">
        <div class="scale-pan" id="scale2-left">
          <div class="shape square"></div>
        </div>
        <div class="scale-equals">=</div>
        <div class="scale-pan" id="scale2-right">
          <div class="shape triangle"></div>
        </div>
      </div>
    </div>
    
    <!-- Question -->
    <div class="question-box">
      <p class="question-text">Which is heavier?</p>
      <p class="question-subtext">Analyze both balanced scales to deduce</p>
    </div>
    
    <!-- Answer Options -->
    <div class="answer-options">
      <div class="option-btn" onclick="selectAnswer('circle')">
        <div class="shape circle option-shape"></div>
        <span class="option-label">Circle</span>
      </div>
      <div class="option-btn" onclick="selectAnswer('triangle')">
        <div class="shape triangle option-shape"></div>
        <span class="option-label">Triangle</span>
      </div>
      <div class="option-btn" onclick="selectAnswer('equal')">
        <div class="shape square option-shape"></div>
        <span class="option-label">Equal</span>
      </div>
    </div>
    
    <!-- Controls -->
    <div class="control-buttons">
      <button class="control-btn btn-hint" onclick="showHint()">
        üí° Hint
      </button>
      <button class="control-btn btn-next" onclick="nextLevel()" id="next-btn">
        Next ‚Üí
      </button>
      <button class="control-btn btn-reset" onclick="resetGame()">
        Reset
      </button>
    </div>
  </div>
</div>

<!-- Popup -->
<div class="popup-overlay" id="popup">
  <div class="popup-content">
    <div class="popup-icon" id="popup-icon">üéâ</div>
    <h2 class="popup-title" id="popup-title">Correct!</h2>
    <p class="popup-message" id="popup-message">
      Circle = Square and Square = Triangle<br><br>
      Therefore, Circle = Triangle
    </p>
    <button class="popup-btn" onclick="closePopup()">Continue</button>
  </div>
</div>

<script>
// Game State
const gameState = {
  score: 270,
  level: 1,
  streak: 5,
  selectedAnswer: null,
  timeLeft: 90, // 1:30 in seconds
  totalLevels: 10
};

// DOM Elements
const scoreEl = document.getElementById('score');
const levelEl = document.getElementById('level');
const streakEl = document.getElementById('streak');
const progressText = document.getElementById('progress-text');
const progressFill = document.getElementById('progress-fill');
const levelDots = document.getElementById('level-dots');
const nextBtn = document.getElementById('next-btn');
const timerEl = document.getElementById('timer');

// Initialize
function init() {
  updateDisplay();
  createLevelDots();
  startTimer();
  nextBtn.disabled = true;
  
  // Set up first puzzle
  loadPuzzle(1);
}

// Load puzzle data
function loadPuzzle(level) {
  // Example puzzles - in real game you'd have more
  const puzzles = [
    {
      scale1: { left: ['circle'], right: ['square'] },
      scale2: { left: ['square'], right: ['triangle'] },
      question: "Which is heavier?",
      correct: 'equal',
      explanation: "Circle = Square and Square = Triangle, therefore Circle = Triangle"
    },
    {
      scale1: { left: ['circle', 'circle'], right: ['square'] },
      scale2: { left: ['square'], right: ['triangle', 'triangle'] },
      question: "Which is heavier?",
      correct: 'equal',
      explanation: "2 Circles = 1 Square and 1 Square = 2 Triangles, so 1 Circle = 1 Triangle"
    },
    {
      scale1: { left: ['circle', 'square'], right: ['triangle', 'triangle', 'triangle'] },
      scale2: { left: ['circle', 'triangle'], right: ['square'] },
      question: "Compare Circle and Triangle",
      correct: 'equal',
      explanation: "From equations: Circle = Triangle. They have equal weight."
    }
  ];
  
  const puzzle = puzzles[(level - 1) % puzzles.length];
  
  // Update scales
  updateScale('scale1-left', puzzle.scale1.left);
  updateScale('scale1-right', puzzle.scale1.right);
  updateScale('scale2-left', puzzle.scale2.left);
  updateScale('scale2-right', puzzle.scale2.right);
  
  // Store current puzzle
  gameState.currentPuzzle = puzzle;
}

// Update scale display
function updateScale(scaleId, shapes) {
  const scale = document.getElementById(scaleId);
  scale.innerHTML = '';
  
  shapes.forEach(shape => {
    const shapeDiv = document.createElement('div');
    shapeDiv.className = `shape ${shape}`;
    scale.appendChild(shapeDiv);
  });
}

// Select answer
function selectAnswer(answer) {
  // Remove previous selection
  document.querySelectorAll('.option-btn').forEach(btn => {
    btn.classList.remove('selected');
  });
  
  // Mark selected
  event.currentTarget.classList.add('selected');
  gameState.selectedAnswer = answer;
  
  // Check answer
  setTimeout(() => checkAnswer(answer), 300);
}

// Check answer
function checkAnswer(answer) {
  const correct = gameState.currentPuzzle.correct;
  const isCorrect = answer === correct;
  
  if (isCorrect) {
    // Correct
    gameState.score += 50;
    gameState.streak++;
    
    if (gameState.streak > 1) {
      gameState.score += gameState.streak * 10;
    }
    
    showPopup(
      'üéâ Correct!',
      gameState.currentPuzzle.explanation
    );
    
    // Enable next button
    nextBtn.disabled = false;
  } else {
    // Incorrect
    gameState.streak = 0;
    gameState.score = Math.max(0, gameState.score - 20);
    
    let correctText = '';
    switch(correct) {
      case 'circle': correctText = 'Circle is heavier'; break;
      case 'triangle': correctText = 'Triangle is heavier'; break;
      case 'equal': correctText = 'Both are equal'; break;
    }
    
    showPopup(
      '‚ùå Incorrect',
      `The correct answer is: ${correctText}.<br><br>${gameState.currentPuzzle.explanation}`
    );
  }
  
  updateDisplay();
}

// Show hint
function showHint() {
  gameState.score = Math.max(0, gameState.score - 15);
  updateDisplay();
  
  const hints = [
    "If A = B and B = C, then A must equal C",
    "Look for shapes that appear on both scales",
    "Count the total number of each shape",
    "Sometimes equal doesn't mean what it seems",
    "Try substituting one shape for another"
  ];
  
  const randomHint = hints[Math.floor(Math.random() * hints.length)];
  
  showPopup(
    'üí° Hint',
    randomHint
  );
}

// Next level
function nextLevel() {
  if (gameState.level < gameState.totalLevels) {
    gameState.level++;
    gameState.selectedAnswer = null;
    nextBtn.disabled = true;
    
    // Clear selections
    document.querySelectorAll('.option-btn').forEach(btn => {
      btn.classList.remove('selected');
    });
    
    // Load new puzzle
    loadPuzzle(gameState.level);
    updateDisplay();
    
    // Reset timer
    gameState.timeLeft = 90;
    updateTimerDisplay();
  } else {
    showPopup(
      'üèÜ Game Complete!',
      `Congratulations! You've completed all ${gameState.totalLevels} levels.<br><br>Final Score: ${gameState.score}`
    );
  }
}

// Reset game
function resetGame() {
  if (confirm("Reset game? Your progress will be lost.")) {
    gameState.score = 0;
    gameState.level = 1;
    gameState.streak = 0;
    gameState.timeLeft = 90;
    gameState.selectedAnswer = null;
    
    nextBtn.disabled = true;
    loadPuzzle(1);
    updateDisplay();
    updateTimerDisplay();
    
    // Clear selections
    document.querySelectorAll('.option-btn').forEach(btn => {
      btn.classList.remove('selected');
    });
  }
}

// Update display
function updateDisplay() {
  scoreEl.textContent = gameState.score;
  levelEl.textContent = gameState.level;
  streakEl.textContent = gameState.streak;
  
  const progressPercent = (gameState.level / gameState.totalLevels) * 100;
  progressFill.style.width = `${progressPercent}%`;
  progressText.textContent = `${gameState.level}/${gameState.totalLevels}`;
}

// Create level dots
function createLevelDots() {
  levelDots.innerHTML = '';
  for (let i = 1; i <= gameState.totalLevels; i++) {
    const dot = document.createElement('div');
    dot.className = `level-dot ${i <= gameState.level ? 'active' : ''}`;
    levelDots.appendChild(dot);
  }
}

// Timer functions
function startTimer() {
  gameState.timerInterval = setInterval(() => {
    if (gameState.timeLeft > 0) {
      gameState.timeLeft--;
      updateTimerDisplay();
    } else {
      timeUp();
    }
  }, 1000);
}

function updateTimerDisplay() {
  const minutes = Math.floor(gameState.timeLeft / 60);
  const seconds = gameState.timeLeft % 60;
  timerEl.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
  
  // Change color when time is low
  if (gameState.timeLeft < 30) {
    timerEl.style.background = 'rgba(239, 68, 68, 0.3)';
    timerEl.style.color = '#fecaca';
  } else {
    timerEl.style.background = 'rgba(30, 41, 59, 0.8)';
    timerEl.style.color = '#cbd5e1';
  }
}

function timeUp() {
  clearInterval(gameState.timerInterval);
  showPopup(
    '‚è∞ Time\'s Up!',
    'Time ran out for this puzzle. Try to solve faster next time!'
  );
}

// Popup functions
function showPopup(icon, message) {
  document.getElementById('popup-icon').textContent = icon;
  document.getElementById('popup-message').innerHTML = message;
  
  // Set title based on icon
  let title = '';
  if (icon.includes('üéâ')) title = 'Correct!';
  else if (icon.includes('‚ùå')) title = 'Incorrect';
  else if (icon.includes('üí°')) title = 'Hint';
  else if (icon.includes('üèÜ')) title = 'Congratulations!';
  else if (icon.includes('‚è∞')) title = 'Time\'s Up!';
  
  document.getElementById('popup-title').textContent = title;
  document.getElementById('popup').style.display = 'flex';
}

function closePopup() {
  document.getElementById('popup').style.display = 'none';
}

// Prevent zoom
document.addEventListener('gesturestart', (e) => e.preventDefault());
document.addEventListener('touchmove', (e) => {
  if (e.scale !== 1) e.preventDefault();
}, { passive: false });

// Initialize on load
window.onload = init;
</script>
</body>
</html>