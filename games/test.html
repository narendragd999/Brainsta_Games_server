<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Physics Playground: Inclined Plane Challenge</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #1a2980, #26d0ce);
            color: white;
            min-height: 100vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            padding: 10px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            width: 100%;
            display: flex;
            flex-direction: column;
            height: 100vh;
            max-height: calc(100vh - 20px);
        }

        header {
            text-align: center;
            padding: 15px 10px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 15px;
            margin-bottom: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        h1 {
            font-size: 1.8rem;
            margin-bottom: 5px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .subtitle {
            font-size: 1rem;
            opacity: 0.9;
        }

        .game-area {
            display: flex;
            flex-direction: column;
            flex-grow: 1;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 15px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }

        .canvas-container {
            flex-grow: 1;
            position: relative;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            margin-bottom: 15px;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #gameCanvas {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            width: 100%;
            height: 100%;
            max-height: 400px;
        }

        .controls {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 15px;
        }

        @media (min-width: 500px) {
            .controls {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        .control-group {
            display: flex;
            flex-direction: column;
            background: rgba(255, 255, 255, 0.1);
            padding: 10px;
            border-radius: 10px;
        }

        .control-label {
            font-size: 0.8rem;
            margin-bottom: 5px;
            opacity: 0.9;
        }

        .slider-container {
            display: flex;
            align-items: center;
        }

        .slider-value {
            margin-left: 8px;
            font-weight: bold;
            min-width: 40px;
            text-align: center;
            background: rgba(255, 255, 255, 0.2);
            padding: 2px 5px;
            border-radius: 5px;
        }

        input[type="range"] {
            width: 100%;
            height: 8px;
            -webkit-appearance: none;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 5px;
            outline: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #4CAF50;
            cursor: pointer;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
        }

        .buttons {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 10px;
        }

        @media (min-width: 500px) {
            .buttons {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        .btn {
            padding: 12px 10px;
            border: none;
            border-radius: 10px;
            font-weight: bold;
            font-size: 0.9rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: all 0.2s;
            color: white;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
        }

        .btn:active {
            transform: translateY(1px);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .btn-primary {
            background: linear-gradient(to right, #2196F3, #1976D2);
        }

        .btn-success {
            background: linear-gradient(to right, #4CAF50, #388E3C);
        }

        .btn-warning {
            background: linear-gradient(to right, #FF9800, #F57C00);
        }

        .btn-danger {
            background: linear-gradient(to right, #F44336, #D32F2F);
        }

        .btn-info {
            background: linear-gradient(to right, #00BCD4, #0097A7);
        }

        .stats {
            display: flex;
            justify-content: space-between;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            padding: 12px 15px;
            margin-top: 15px;
            font-size: 0.9rem;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-weight: bold;
            font-size: 1.2rem;
            color: #4CAF50;
        }

        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
        }

        .modal.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: linear-gradient(135deg, #1a2980, #26d0ce);
            width: 90%;
            max-width: 500px;
            max-height: 80vh;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.4);
            overflow-y: auto;
            position: relative;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: bold;
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 1.8rem;
            color: white;
            cursor: pointer;
        }

        .modal-body {
            line-height: 1.6;
        }

        .modal-body h3 {
            margin: 15px 0 10px;
            color: #4CAF50;
        }

        .modal-body ul {
            padding-left: 20px;
            margin-bottom: 15px;
        }

        .modal-body li {
            margin-bottom: 8px;
        }

        .hint-container {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .hint-container:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.1);
        }

        .hint-icon {
            font-size: 1.5rem;
            color: #FF9800;
        }

        .notification {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%) translateY(-100px);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            z-index: 100;
            transition: transform 0.5s;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            max-width: 90%;
            text-align: center;
        }

        .notification.show {
            transform: translateX(-50%) translateY(0);
        }

        .sound-toggle {
            position: absolute;
            top: 15px;
            left: 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .sound-toggle:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.1);
        }

        .sound-icon {
            font-size: 1.3rem;
            color: #4CAF50;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-mountain"></i> Inclined Plane Challenge</h1>
            <p class="subtitle">Adjust the parameters to achieve the target force and solve the physics puzzle!</p>
        </header>

        <div class="game-area">
            <div class="canvas-container">
                <div class="sound-toggle" id="soundToggle">
                    <i class="fas fa-volume-up sound-icon" id="soundIcon"></i>
                </div>
                <div class="hint-container" id="hintButton">
                    <i class="fas fa-lightbulb hint-icon"></i>
                </div>
                <canvas id="gameCanvas"></canvas>
            </div>

            <div class="controls">
                <div class="control-group">
                    <div class="control-label">Angle: <span id="angleValue">30°</span></div>
                    <div class="slider-container">
                        <input type="range" id="angleSlider" min="5" max="85" value="30" step="1">
                    </div>
                </div>
                
                <div class="control-group">
                    <div class="control-label">Mass: <span id="massValue">10 kg</span></div>
                    <div class="slider-container">
                        <input type="range" id="massSlider" min="1" max="50" value="10" step="1">
                    </div>
                </div>
                
                <div class="control-group">
                    <div class="control-label">Friction: <span id="frictionValue">0.2</span></div>
                    <div class="slider-container">
                        <input type="range" id="frictionSlider" min="0" max="1" value="0.2" step="0.05">
                    </div>
                </div>
                
                <div class="control-group">
                    <div class="control-label">Gravity: <span id="gravityValue">9.8 m/s²</span></div>
                    <div class="slider-container">
                        <input type="range" id="gravitySlider" min="3" max="20" value="9.8" step="0.1">
                    </div>
                </div>
            </div>

            <div class="buttons">
                <button class="btn btn-primary" id="checkBtn">
                    <i class="fas fa-check-circle"></i> Check Solution
                </button>
                <button class="btn btn-success" id="newPuzzleBtn">
                    <i class="fas fa-plus-circle"></i> New Puzzle
                </button>
                <button class="btn btn-warning" id="autoSolveBtn">
                    <i class="fas fa-robot"></i> Auto-Solve
                </button>
                <button class="btn btn-info" id="instructionsBtn">
                    <i class="fas fa-question-circle"></i> Instructions
                </button>
            </div>

            <div class="stats">
                <div class="stat-item">
                    <div>Target Force</div>
                    <div class="stat-value" id="targetForce">75 N</div>
                </div>
                <div class="stat-item">
                    <div>Your Force</div>
                    <div class="stat-value" id="currentForce">0 N</div>
                </div>
                <div class="stat-item">
                    <div>Puzzles Solved</div>
                    <div class="stat-value" id="solvedCount">0</div>
                </div>
                <div class="stat-item">
                    <div>Accuracy</div>
                    <div class="stat-value" id="accuracy">0%</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Instructions Modal -->
    <div class="modal" id="instructionsModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title"><i class="fas fa-info-circle"></i> How to Play</div>
                <button class="close-modal" id="closeInstructions">&times;</button>
            </div>
            <div class="modal-body">
                <h3>Game Objective</h3>
                <p>Adjust the parameters of the inclined plane to achieve the target force shown at the top of the screen.</p>
                
                <h3>Physics Concepts</h3>
                <p>The force parallel to the inclined plane is calculated using:</p>
                <p><strong>F = m × g × sin(θ) - μ × m × g × cos(θ)</strong></p>
                <ul>
                    <li><strong>m</strong> = Mass of the object (kg)</li>
                    <li><strong>g</strong> = Gravity (m/s²)</li>
                    <li><strong>θ</strong> = Angle of the incline (degrees)</li>
                    <li><strong>μ</strong> = Coefficient of friction</li>
                </ul>
                
                <h3>Controls</h3>
                <ul>
                    <li><strong>Sliders:</strong> Adjust angle, mass, friction, and gravity</li>
                    <li><strong>Check Solution:</strong> Verify if your calculated force matches the target</li>
                    <li><strong>New Puzzle:</strong> Generate a new random target force</li>
                    <li><strong>Auto-Solve:</strong> Let the computer solve the puzzle for you</li>
                    <li><strong>Hint:</strong> Get a hint about which parameter to adjust</li>
                </ul>
                
                <h3>Tips</h3>
                <ul>
                    <li>Increase mass or gravity to increase force</li>
                    <li>Increase angle to increase the parallel component of force</li>
                    <li>Increase friction to decrease the net force</li>
                    <li>Target force range is between 10N and 300N</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Hint Modal -->
    <div class="modal" id="hintModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title"><i class="fas fa-lightbulb"></i> Hint</div>
                <button class="close-modal" id="closeHint">&times;</button>
            </div>
            <div class="modal-body">
                <p id="hintText"></p>
                <p>Remember the formula: <strong>F = m × g × sin(θ) - μ × m × g × cos(θ)</strong></p>
                <p>Current difference: <span id="forceDifference">0 N</span></p>
            </div>
        </div>
    </div>

    <!-- Notification -->
    <div class="notification" id="notification"></div>

    <!-- Audio elements for sounds -->
    <audio id="correctSound" preload="auto">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-winning-chimes-2015.mp3" type="audio/mpeg">
    </audio>
    <audio id="wrongSound" preload="auto">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-wrong-answer-fail-notification-946.mp3" type="audio/mpeg">
    </audio>
    <audio id="slideSound" preload="auto">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-unlock-game-notification-253.mp3" type="audio/mpeg">
    </audio>
    <audio id="clickSound" preload="auto">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-select-click-1109.mp3" type="audio/mpeg">
    </audio>

    <script>
        // Game variables
        let canvas, ctx;
        let targetForce = 75;
        let currentForce = 0;
        let angle = 30;
        let mass = 10;
        let friction = 0.2;
        let gravity = 9.8;
        let puzzlesSolved = 0;
        let attempts = 0;
        let correctAttempts = 0;
        let soundEnabled = true;
        let gameRunning = true;

        // DOM elements
        const gameCanvas = document.getElementById('gameCanvas');
        const angleSlider = document.getElementById('angleSlider');
        const massSlider = document.getElementById('massSlider');
        const frictionSlider = document.getElementById('frictionSlider');
        const gravitySlider = document.getElementById('gravitySlider');
        const angleValue = document.getElementById('angleValue');
        const massValue = document.getElementById('massValue');
        const frictionValue = document.getElementById('frictionValue');
        const gravityValue = document.getElementById('gravityValue');
        const targetForceEl = document.getElementById('targetForce');
        const currentForceEl = document.getElementById('currentForce');
        const solvedCountEl = document.getElementById('solvedCount');
        const accuracyEl = document.getElementById('accuracy');
        const checkBtn = document.getElementById('checkBtn');
        const newPuzzleBtn = document.getElementById('newPuzzleBtn');
        const autoSolveBtn = document.getElementById('autoSolveBtn');
        const instructionsBtn = document.getElementById('instructionsBtn');
        const instructionsModal = document.getElementById('instructionsModal');
        const closeInstructions = document.getElementById('closeInstructions');
        const hintButton = document.getElementById('hintButton');
        const hintModal = document.getElementById('hintModal');
        const closeHint = document.getElementById('closeHint');
        const hintText = document.getElementById('hintText');
        const forceDifference = document.getElementById('forceDifference');
        const notification = document.getElementById('notification');
        const soundToggle = document.getElementById('soundToggle');
        const soundIcon = document.getElementById('soundIcon');
        const correctSound = document.getElementById('correctSound');
        const wrongSound = document.getElementById('wrongSound');
        const slideSound = document.getElementById('slideSound');
        const clickSound = document.getElementById('clickSound');

        // Initialize canvas
        function initCanvas() {
            canvas = gameCanvas;
            ctx = canvas.getContext('2d');
            
            // Set canvas dimensions
            resizeCanvas();
            window.addEventListener('resize', resizeCanvas);
            
            // Draw initial scene
            drawInclinedPlane();
        }

        // Resize canvas for mobile responsiveness
        function resizeCanvas() {
            const container = canvas.parentElement;
            canvas.width = container.clientWidth;
            canvas.height = container.clientHeight;
            drawInclinedPlane();
        }

        // Calculate force parallel to the inclined plane
        function calculateForce() {
            const angleRad = angle * Math.PI / 180;
            const forceParallel = mass * gravity * Math.sin(angleRad);
            const frictionForce = friction * mass * gravity * Math.cos(angleRad);
            return forceParallel - frictionForce;
        }

        // Draw the inclined plane with object
        function drawInclinedPlane() {
            if (!ctx) return;
            
            const width = canvas.width;
            const height = canvas.height;
            const padding = 40;
            const planeLength = Math.min(width, height) * 0.7;
            
            // Clear canvas
            ctx.clearRect(0, 0, width, height);
            
            // Calculate positions
            const angleRad = angle * Math.PI / 180;
            const inclineX = planeLength * Math.cos(angleRad);
            const inclineY = planeLength * Math.sin(angleRad);
            
            const startX = padding;
            const startY = height - padding;
            const endX = startX + inclineX;
            const endY = startY - inclineY;
            
            // Draw inclined plane surface
            ctx.beginPath();
            ctx.moveTo(startX, startY);
            ctx.lineTo(endX, endY);
            ctx.lineWidth = 8;
            ctx.strokeStyle = '#555';
            ctx.stroke();
            
            // Draw ground line
            ctx.beginPath();
            ctx.moveTo(startX, startY);
            ctx.lineTo(startX + planeLength, startY);
            ctx.lineWidth = 4;
            ctx.strokeStyle = '#777';
            ctx.stroke();
            
            // Draw angle arc
            ctx.beginPath();
            ctx.arc(startX, startY, 30, 0, angleRad, false);
            ctx.lineWidth = 2;
            ctx.strokeStyle = '#FF9800';
            ctx.stroke();
            
            // Draw angle label
            ctx.font = "16px Arial";
            ctx.fillStyle = "#FF9800";
            ctx.fillText(`${angle}°`, startX + 20, startY - 15);
            
            // Draw the object (box)
            const boxSize = 40 + mass * 2;
            const boxX = startX + inclineX * 0.5 - boxSize/2;
            const boxY = startY - inclineY * 0.5 - boxSize/2;
            
            ctx.fillStyle = '#2196F3';
            ctx.fillRect(boxX, boxY, boxSize, boxSize);
            
            // Draw mass label
            ctx.fillStyle = '#FFF';
            ctx.font = "bold 14px Arial";
            ctx.textAlign = "center";
            ctx.fillText(`${mass}kg`, boxX + boxSize/2, boxY + boxSize/2 + 5);
            
            // Draw force arrows
            drawForceArrows(startX, startY, endX, endY, boxX + boxSize/2, boxY + boxSize/2);
            
            // Draw target and current force
            ctx.font = "bold 18px Arial";
            ctx.textAlign = "left";
            ctx.fillStyle = "#4CAF50";
            ctx.fillText(`Target: ${targetForce.toFixed(1)} N`, width - 200, 30);
            ctx.fillStyle = "#2196F3";
            ctx.fillText(`Current: ${currentForce.toFixed(1)} N`, width - 200, 60);
            
            // Draw formula
            ctx.font = "14px Arial";
            ctx.fillStyle = "#FFF";
            ctx.fillStyle = "#FF9800";
            ctx.fillText("F = m·g·sin(θ) - μ·m·g·cos(θ)", 20, 30);
        }

        // Draw force arrows on the object
        function drawForceArrows(startX, startY, endX, endY, boxCenterX, boxCenterY) {
            const angleRad = angle * Math.PI / 180;
            
            // Gravity force (downwards)
            ctx.beginPath();
            ctx.moveTo(boxCenterX, boxCenterY);
            ctx.lineTo(boxCenterX, boxCenterY + 60);
            ctx.lineWidth = 3;
            ctx.strokeStyle = '#F44336';
            ctx.stroke();
            
            // Draw arrowhead for gravity
            drawArrowhead(boxCenterX, boxCenterY + 60, Math.PI/2, 10);
            ctx.fillStyle = '#F44336';
            ctx.fillText("Fg", boxCenterX - 15, boxCenterY + 75);
            
            // Parallel force (down the incline)
            ctx.beginPath();
            ctx.moveTo(boxCenterX, boxCenterY);
            ctx.lineTo(
                boxCenterX + 60 * Math.cos(angleRad + Math.PI),
                boxCenterY + 60 * Math.sin(angleRad + Math.PI)
            );
            ctx.lineWidth = 3;
            ctx.strokeStyle = '#4CAF50';
            ctx.stroke();
            
            // Draw arrowhead for parallel force
            drawArrowhead(
                boxCenterX + 60 * Math.cos(angleRad + Math.PI),
                boxCenterY + 60 * Math.sin(angleRad + Math.PI),
                angleRad + Math.PI, 10
            );
            ctx.fillStyle = '#4CAF50';
            ctx.fillText("F∥", 
                boxCenterX + 70 * Math.cos(angleRad + Math.PI) - 10,
                boxCenterY + 70 * Math.sin(angleRad + Math.PI) + 5
            );
            
            // Normal force (perpendicular to surface)
            ctx.beginPath();
            ctx.moveTo(boxCenterX, boxCenterY);
            ctx.lineTo(
                boxCenterX + 40 * Math.cos(angleRad - Math.PI/2),
                boxCenterY + 40 * Math.sin(angleRad - Math.PI/2)
            );
            ctx.lineWidth = 3;
            ctx.strokeStyle = '#9C27B0';
            ctx.stroke();
            
            // Draw arrowhead for normal force
            drawArrowhead(
                boxCenterX + 40 * Math.cos(angleRad - Math.PI/2),
                boxCenterY + 40 * Math.sin(angleRad - Math.PI/2),
                angleRad - Math.PI/2, 10
            );
            ctx.fillStyle = '#9C27B0';
            ctx.fillText("Fn", 
                boxCenterX + 50 * Math.cos(angleRad - Math.PI/2) - 5,
                boxCenterY + 50 * Math.sin(angleRad - Math.PI/2) + 5
            );
            
            // Friction force (opposing motion)
            if (friction > 0) {
                ctx.beginPath();
                ctx.moveTo(boxCenterX, boxCenterY);
                ctx.lineTo(
                    boxCenterX + 40 * Math.cos(angleRad),
                    boxCenterY + 40 * Math.sin(angleRad)
                );
                ctx.lineWidth = 3;
                ctx.strokeStyle = '#FF9800';
                ctx.setLineDash([5, 5]);
                ctx.stroke();
                ctx.setLineDash([]);
                
                // Draw arrowhead for friction
                drawArrowhead(
                    boxCenterX + 40 * Math.cos(angleRad),
                    boxCenterY + 40 * Math.sin(angleRad),
                    angleRad, 10
                );
                ctx.fillStyle = '#FF9800';
                ctx.fillText("Ff", 
                    boxCenterX + 50 * Math.cos(angleRad) - 5,
                    boxCenterY + 50 * Math.sin(angleRad) + 5
                );
            }
        }

        // Draw arrowhead for force vectors
        function drawArrowhead(x, y, angle, size) {
            ctx.save();
            ctx.translate(x, y);
            ctx.rotate(angle);
            
            ctx.beginPath();
            ctx.moveTo(0, 0);
            ctx.lineTo(-size, -size/2);
            ctx.lineTo(-size, size/2);
            ctx.closePath();
            ctx.fillStyle = ctx.strokeStyle;
            ctx.fill();
            
            ctx.restore();
        }

        // Update UI values
        function updateUI() {
            angleValue.textContent = `${angle}°`;
            massValue.textContent = `${mass} kg`;
            frictionValue.textContent = friction.toFixed(2);
            gravityValue.textContent = `${gravity.toFixed(1)} m/s²`;
            
            currentForce = calculateForce();
            currentForceEl.textContent = `${currentForce.toFixed(1)} N`;
            
            drawInclinedPlane();
        }

        // Generate a new puzzle with random target force
        function newPuzzle() {
            targetForce = Math.floor(Math.random() * 291) + 10; // 10 to 300
            targetForceEl.textContent = `${targetForce} N`;
            
            // Reset sliders to random values
            angle = Math.floor(Math.random() * 50) + 20; // 20 to 70
            mass = Math.floor(Math.random() * 30) + 5; // 5 to 35
            friction = Math.floor(Math.random() * 16) / 20; // 0 to 0.8 in steps of 0.05
            gravity = Math.floor(Math.random() * 13) + 7; // 7 to 19
            
            angleSlider.value = angle;
            massSlider.value = mass;
            frictionSlider.value = friction;
            gravitySlider.value = gravity;
            
            updateUI();
            playSound(clickSound);
            showNotification("New puzzle generated! Target: " + targetForce + " N");
        }

        // Check if the current solution is correct
        function checkSolution() {
            attempts++;
            const difference = Math.abs(currentForce - targetForce);
            const tolerance = 0.5; // Allowable error margin
            
            if (difference <= tolerance) {
                puzzlesSolved++;
                correctAttempts++;
                updateStats();
                playSound(correctSound);
                showNotification(`Correct! Force = ${currentForce.toFixed(1)} N (Target: ${targetForce} N)`, "success");
                
                // Auto-generate new puzzle after 2 seconds
                if (gameRunning) {
                    setTimeout(newPuzzle, 2000);
                }
            } else {
                playSound(wrongSound);
                showNotification(`Off by ${difference.toFixed(1)} N. Try adjusting the parameters.`, "error");
            }
            
            updateStats();
        }

        // Automatically solve the puzzle
        function autoSolve() {
            // Simple algorithm to approach target force
            let bestDifference = Math.abs(calculateForce() - targetForce);
            let bestAngle = angle;
            let bestMass = mass;
            let bestFriction = friction;
            let bestGravity = gravity;
            
            // Try random combinations to find a solution
            for (let i = 0; i < 100; i++) {
                const testAngle = Math.floor(Math.random() * 81) + 5;
                const testMass = Math.floor(Math.random() * 49) + 1;
                const testFriction = Math.floor(Math.random() * 21) / 20; // 0 to 1 in steps of 0.05
                const testGravity = Math.floor(Math.random() * 18) + 3; // 3 to 20
                
                // Temporarily set values to test
                const originalAngle = angle;
                const originalMass = mass;
                const originalFriction = friction;
                const originalGravity = gravity;
                
                angle = testAngle;
                mass = testMass;
                friction = testFriction;
                gravity = testGravity;
                
                const testForce = calculateForce();
                const difference = Math.abs(testForce - targetForce);
                
                if (difference < bestDifference) {
                    bestDifference = difference;
                    bestAngle = testAngle;
                    bestMass = testMass;
                    bestFriction = testFriction;
                    bestGravity = testGravity;
                }
                
                // Restore original values
                angle = originalAngle;
                mass = originalMass;
                friction = originalFriction;
                gravity = originalGravity;
            }
            
            // Apply the best found solution
            angle = bestAngle;
            mass = bestMass;
            friction = bestFriction;
            gravity = bestGravity;
            
            angleSlider.value = angle;
            massSlider.value = mass;
            frictionSlider.value = friction;
            gravitySlider.value = gravity;
            
            updateUI();
            playSound(slideSound);
            showNotification("Auto-solve applied! Check if it's correct.");
        }

        // Provide a hint to the player
        function provideHint() {
            const difference = currentForce - targetForce;
            const absDifference = Math.abs(difference);
            
            forceDifference.textContent = `${absDifference.toFixed(1)} N`;
            
            if (absDifference < 5) {
                hintText.textContent = "You're very close! Try making tiny adjustments to any parameter.";
            } else if (difference > 0) {
                hintText.textContent = "Your force is too high. Try decreasing the mass, angle, or gravity, or increase friction.";
            } else {
                hintText.textContent = "Your force is too low. Try increasing the mass, angle, or gravity, or decrease friction.";
            }
            
            hintModal.classList.add('active');
            playSound(clickSound);
        }

        // Update game statistics
        function updateStats() {
            solvedCountEl.textContent = puzzlesSolved;
            const accuracy = attempts > 0 ? Math.round((correctAttempts / attempts) * 100) : 0;
            accuracyEl.textContent = `${accuracy}%`;
        }

        // Show notification message
        function showNotification(message, type = "info") {
            notification.textContent = message;
            notification.className = "notification show";
            
            if (type === "success") {
                notification.style.background = "rgba(76, 175, 80, 0.9)";
            } else if (type === "error") {
                notification.style.background = "rgba(244, 67, 54, 0.9)";
            } else {
                notification.style.background = "rgba(33, 150, 243, 0.9)";
            }
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // Play sound if enabled
        function playSound(soundElement) {
            if (soundEnabled) {
                soundElement.currentTime = 0;
                soundElement.play().catch(e => console.log("Audio play failed:", e));
            }
        }

        // Toggle sound on/off
        function toggleSound() {
            soundEnabled = !soundEnabled;
            soundIcon.className = soundEnabled ? "fas fa-volume-up sound-icon" : "fas fa-volume-mute sound-icon";
            playSound(clickSound);
        }

        // Initialize the game
        function init() {
            initCanvas();
            newPuzzle();
            
            // Event listeners for sliders
            angleSlider.addEventListener('input', () => {
                angle = parseInt(angleSlider.value);
                updateUI();
                playSound(slideSound);
            });
            
            massSlider.addEventListener('input', () => {
                mass = parseInt(massSlider.value);
                updateUI();
                playSound(slideSound);
            });
            
            frictionSlider.addEventListener('input', () => {
                friction = parseFloat(frictionSlider.value);
                updateUI();
                playSound(slideSound);
            });
            
            gravitySlider.addEventListener('input', () => {
                gravity = parseFloat(gravitySlider.value);
                updateUI();
                playSound(slideSound);
            });
            
            // Event listeners for buttons
            checkBtn.addEventListener('click', () => {
                checkSolution();
                playSound(clickSound);
            });
            
            newPuzzleBtn.addEventListener('click', () => {
                newPuzzle();
            });
            
            autoSolveBtn.addEventListener('click', () => {
                autoSolve();
                playSound(clickSound);
            });
            
            instructionsBtn.addEventListener('click', () => {
                instructionsModal.classList.add('active');
                playSound(clickSound);
            });
            
            hintButton.addEventListener('click', () => {
                provideHint();
            });
            
            // Close modals
            closeInstructions.addEventListener('click', () => {
                instructionsModal.classList.remove('active');
                playSound(clickSound);
            });
            
            closeHint.addEventListener('click', () => {
                hintModal.classList.remove('active');
                playSound(clickSound);
            });
            
            // Close modals when clicking outside
            window.addEventListener('click', (e) => {
                if (e.target === instructionsModal) {
                    instructionsModal.classList.remove('active');
                }
                if (e.target === hintModal) {
                    hintModal.classList.remove('active');
                }
            });
            
            // Sound toggle
            soundToggle.addEventListener('click', toggleSound);
            
            // Update stats initially
            updateStats();
            
            // Show welcome notification
            setTimeout(() => {
                showNotification("Welcome to Inclined Plane Challenge! Adjust parameters to match the target force.", "info");
            }, 1000);
        }

        // Start the game when page loads
        window.onload = init;
    </script>
</body>
</html>