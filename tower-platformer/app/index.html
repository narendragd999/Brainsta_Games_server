<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Tower Platformer â€” Static</title>
  <style>
    body { margin:0; background:#111; color:#fff; font-family:sans-serif; }
    #hud { position:absolute; top:5px; left:5px; z-index:10; }
    #score { font-size:18px; }
    canvas { display:block; margin:0 auto; background:#222; }
  </style>
</head>
<body>

<div id="hud">
  Score: <span id="score">0</span>
  <div id="debug"></div>
</div>
<canvas id="canvas"></canvas>

<!-- embed your demo.json -->
<script id="levels-levels_demo_json" type="application/json">
{
  "name":  "demo level",
  "color": {
    "wall":     "#70482C",
    "platform": "#C0C0C0",
    "stroke":   "#000000"
  },
  "map": [
    "XXXXXXXXXXXXXXXXXHXX",
    "                 H  ",
    "                 H  ",
    "                 H  ",
    "     o           H  ",
    "    o o          H  ",
    "   o   oooooooo  H  ",
    "   o   XXXXXXXH  X  ",
    "   o          H     ",
    "   o          H     ",
    "   o          H     ",
    "   o          H     ",
    "   o          H     ",
    "   o          H     ",
    "   o          H     ",
    "   o          H     ",
    "   o          H     ",
    "   o          H     ",
    "   o          H     ",
    "   o          H     ",
    "   o          H     ",
    "   o          H     ",
    "   o          H     ",
    "   o          H     ",
    "   o          H     ",
    "   o          H     ",
    "   o          H     ",
    "   o          H     ",
    "   o          H     ",
    "   o          H     ",
    "   o          H     ",
    "   o          H     ",
    "   o          H     ",
    "   o          H     ",
    "   o          H     ",
    "   o          H     ",
    "   o          H     ",
    "   o          H     ",
    "   o          H     ",
    "   o          H     ",
    "   o          H     ",
    "   o          H     ",
    "   o          H     ",
    "   o          H     ",
    "   o          H     ",
    "   o          H     ",
    "   o          H     ",
    "   o          H     ",
    "   o          H     ",
    "   o          H     ",
    "   o          H     ",
    "   o          H     ",
    "   o          H     ",
    "              H     ",
    "              H     ",
    "              H     ",
    "              H     ",
    "   oooooooooooH     ",
    "   HXXXXXXXXXXX     ",
    "   H                ",
    "   H        0       ",
    "   H       0        ",
    "   H      0         ",
    "   H     0          ",
    "   H    0           ",
    "   H   0            ",
    "   H  0             ",
    "   Ho0ooooooooooo   ",
    "   XXXXXXXXXXXXXH   ",
    "                H   ",
    "                H   ",
    "                H   ",
    "                H   ",
    "                X   ",
    "                 X  ",
    "  1               X ",
    "XXX  2             X",
    "   XXXX 3           ",
    "       XXXX  2      ",
    "           XXXX   1 ",
    "               XXXXH",
    "                   H",
    "                   H",
    "                   H",
    "                  XX",
    "               0 X  ",
    "            o  HX   ",
    "            o  H    ",
    "            o  H    ",
    "            o  H    ",
    "            o  H    ",
    "            o  H    ",
    "            o  H    ",
    "            o  H    ",
    "            o  H    ",
    "            o 0H    ",
    "            o  H    ",
    "            o  H    ",
    "            o  H    ",
    "            o  H    ",
    "            o  H    ",
    "            o  H    ",
    "            o0 H  1 ",
    "XXXXXX   XXHXXXXXXXX",
    "o  o       H        ",
    "o  o       H        ",
    "o  o       H        ",
    "o  X       H        ",
    "o  o       H        ",
    "X  o    0  H        ",
    "   o       H        ",
    "   X       H        ",
    "           H        ",
    "oooo       H        ",
    "XXXX       H        ",
    "           H        ",
    "           H        ",
    "           H        ",
    "           H        ",
    "    ooooo  H  1ooooo",
    "    XXXXX  X  XXXXXX",
    "                    ",
    "                    ",
    " XX                 ",
    "X  X                ",
    "    X              X",
    "                  X ",
    "oooooooo        0X  ",
    "HXXXXXXX        X   ",
    "H       XX    XX    ",
    "H                   ",
    "H           0       ",
    "H  3       XX       ",
    "XXHXXXX   XXXX2     ",
    "  H      X    XXX   ",
    "  H     X           ",
    "  H    X          X ",
    "  H                 ",
    "  H        ooooooooo"
  ]
}

</script>

<script src="fpsmeter.min.js"></script>
<script src="common.js"></script>

<script>
// offline JSON loader
function getLevel(path, callback) {
  const id = 'levels-' + path.replace(/[^\w]/g, '_');
  const el = document.getElementById(id);
  if (el) {
    try { return callback(JSON.parse(el.textContent)); }
    catch(e) { console.error("Bad JSON", e); }
  }
  fetch(path).then(r=>r.json()).then(callback);
}
</script>

<script src="tower.js"></script>

</body>
</html>
